## 关键指标

**RPS**：每秒请求数，它表示压测工具**每秒实际向服务器发送的请求的总数量**

**TPS**：每秒事务数，表示压测工具**每秒完成的事务数量**。**注意：**如果事务中有请求失败导致整个事务失败，该事务不会被计入 TPS，但失败的**请求**通常**会被计入 RPS**。

**并发用户数**：设定的“并发100”，表示**同时处于活动状态**的虚拟用户数量。**与 RPS/TPS 的关系：** 它是施加压力的源头，但**不等于** RPS 或 TPS。100 个并发用户能产生多少 RPS/TPS，**完全取决于服务器的处理能力**。

**TP95**：将所有耗时从快到慢排列，表示 **95% 的请求响应时间小于或等于这个值**，只有 5% 的请求比它慢。**是衡量系统响应速度的“体验保障线”。它们告诉你：有多少比例的用户能在某个时间内完成操作。



## 并发测试机制

**并发用户数 = 100** 表示有100个**独立的虚拟用户线程/进程**在**同时运行**。一个用户完成一次“查看报告详情页”（1 个事务）后，通常会 **马上开始下一个事务**

但**每个虚拟用户内部**：

- 必须**顺序执行**事务中的多个请求（例如你的5个请求）。请求2必须等请求1的响应回来才能发送。
- **大部分时间在等待**：发送一个请求后，用户线程会阻塞，等待服务器响应。这是**最关键的瓶颈**。



## **测试结论汇总**

1. **系统并发能力**
   - 最大并发：150 用户
   - 最佳拐点：120 用户（超过这个并发后，响应时间迅速上升，性能明显下降）
      👉 平台在 120 个并发用户以内表现相对稳定，可以作为推荐的安全并发范围。
2. **吞吐能力**
   - 平均 RPS：75 hit/s
   - 平均 TPS：15 hit/s
      👉 平台在并发压力下，每秒大约能处理 **75 个接口请求**，或 **15 次完整的报告详情页面访问**。
3. **响应性能**
   - TP95：10,345 ms ≈ 10.3 秒
      👉 在高并发下，95% 的请求需要 10 秒以上才返回，用户等待体验明显偏慢。



## TP50、TP90、TP95、TP99指标

## **1. 各指标含义回顾**

- **TP50 (中位数)**：一半的请求比它快，一半比它慢。代表“典型用户”的体验。
- **TP90**：90% 请求比它快，10% 更慢。代表“大多数用户”的体验。
- **TP95**：95% 请求比它快，5% 更慢。代表“几乎所有用户”的体验。
- **TP99**：99% 请求比它快，1% 更慢。代表“最慢用户”的体验，通常是系统尾部延迟的暴露点。

## **2. 结合这些指标可能发现的问题**

1. **TP50 很好，但 TP95/TP99 很差**

   - 表明大多数用户体验良好，但仍有少部分用户“极其慢”。
   - 可能原因：数据库长尾查询、部分节点负载不均、某些缓存未命中。
   - **结论**：系统存在严重的“尾部延迟”问题，需要优化最慢 5%~1% 的请求。

2. **TP50 与 TP90/TP95 差距很大**

   - 表明性能分布不均衡：大多数用户快，但有不少用户比平均值慢很多。
   - 可能原因：资源竞争（锁、队列）、网络波动、垃圾回收（GC）停顿。
   - **结论**：系统稳定性不足，需要找出影响分布尾部的瓶颈。

3. **TP50、TP90、TP95 都偏高**

   - 表明整体性能差，大多数用户体验都不好。
   - 可能原因：架构瓶颈（数据库查询慢、接口逻辑复杂）、硬件资源不足。
   - **结论**：需要整体性能优化，不仅是个别请求的问题。

4. **TP90 和 TP95 差别不大，但 TP99 飙升**

   - 表明绝大多数用户体验正常，只有极少数请求“异常慢”。
   - 可能原因：极端场景（比如数据量特别大的请求）、部分节点异常、极少数路径逻辑不一致。
   - **结论**：重点排查最慢 1% 的请求，可能是 Bug 或配置问题。

    **一句话总结**：
    通过 **TP50 / TP90 / TP95 / TP99**，我们可以看清楚：

   - TP50：半数用户是否快
   - TP90、TP95：大部分用户是否快
   - TP99：极少数用户是否异常慢
      👉 从而判断系统是“整体性能差”还是“尾部长尾问题严重”，并据此确定优化方向。

   **与平均值的区别**

   “平均 5 秒”听起来还可以，但不能说明真实情况。**TP95 揭示了：仍然有不少用户需要等到 10 秒以上，远远超过业务的可接受阈值**。